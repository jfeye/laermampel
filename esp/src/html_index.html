<!DOCTYPE HTML>
<!--
  Run this page through
  https://htmlcompressor.com/compressor/
  before pasting it in html_index.h
-->
<html>
<head lang="de">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>L&auml;rmampel</title>
  <script>
    function gebID(e) {
      return document.getElementById(e);
    }
    function req(theUrl) {
      var xhr = new XMLHttpRequest();
      res = "";
      xhr.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
          res = this.responseText;
        }
      };
      xhr.open("GET", theUrl, true); // true for asynchronous
      xhr.send(null);
      return res;
    }
    function setV(e, v) {
      req("set?" + e + "=" + v);
    }
    function getV(v) {
      gebID(v).value = parseInt(req("get?v="+v));
      gebID(v+'v').value = gebID(v).value;
    }
    function btnclr(id) {
      if (id == "on") {
        setFW('on', 'bold');
        setFW('off', 'normal');
      } else {
        setFW('on', 'normal');
        setFW('off', 'bold');
      }
    }
    function setFW(e, fw) {
    	gebID(e).style = "font-weight:" + fw;
    }
    function setTF(e, v) {
      var re=/^-?[0-9]+$/;
      var old = gebID(e).value;
      if (!v.match(re)) {
        gebID(e+'v').value = old;
        return false;
      }
    	if (v > 255) {
        gebID(e).value = 255;
        gebID(e+'v').value = 255;
      } else if (v < 0) {
        gebID(e).value = 0;
        gebID(e+'v').value = 0;
      } else {
        gebID(e).value = v;
      }
      setV(e, gebID(e).value);
    }
  </script>
  <style>
    * {
      font-family: sans-serif;
      font-size: 20pt;
      color: #000;
    }
    input[type=range] {
      display: block;
      margin: auto;
      width: 95%;
    }
    button {
      width: 100px;
    }
    input[type=text] {
      text-align: center;
    }
    div {
      text-align: center;
    }
  </style>
</head>
<body onload="getV('b'); getV('s'); btnclr('on');">
  <p align="center">
    <button id="off" onclick="setV('b',0); btnclr('off');">OFF</button>&nbsp;
    <button id="on" onclick="setV('b', gebID('b').value); btnclr('on');">ON</button>
    <br />
    <fieldset>
      <legend align="center">Brightness</legend>
      <div>
        <input type="range" min="0" max="255" id="b" onchange="setV('b', this.value); gebID('bv').value=this.value;">
        <input type="text" id="bv" size="3" onchange="setTF('b', this.value);">
      </div>
    </fieldset>
    <br />
    <fieldset>
      <legend align="center">Mic Sensitivity</legend>
      <div>
        <input type="range" min="0" max="255" id="s" onchange="setV('s', this.value); gebID('sv').value=this.value;">
        <input type="text" id="sv" size="3" onchange="setTF('s', this.value);">
      </div>
    </fieldset>
  </p>
</body>
</html>
